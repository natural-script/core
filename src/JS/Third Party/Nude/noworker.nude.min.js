(function(){Array.prototype.remove=function(b){var c=this.slice(b+1);this.length=b;return this.push.apply(this,c)};var a=(function(){var f=null,p=null,j=[],m=null,t=null,k=function(){f=document.createElement("canvas");f.style.display="none";var u=document.getElementsByTagName("body")[0];u.appendChild(f);p=f.getContext("2d")},b=function(v){var u=document.getElementById(v);f.width=u.width;f.height=u.height;m=null;p.drawImage(u,0,0)},g=function(u){f.width=u.width;f.height=u.height;m=null;p.drawImage(u,0,0)},q=function(){var J=p.getImageData(0,0,f.width,f.height),Q=J.data,L=[],A=[],S=[],N=f.width,E=-1,K=-1;var B=function(W,V){E=W;K=V;var u=S.length,x=-1,T=-1;while(u--){var y=S[u],U=y.length;while(U--){if(y[U]==W){x=u}if(y[U]==V){T=u}}}if(x!=-1&&T!=-1&&x==T){return}if(x==-1&&T==-1){S.push([W,V]);return}if(x!=-1&&T==-1){S[x].push(V);return}if(x==-1&&T!=-1){S[T].push(W);return}if(x!=-1&&T!=-1&&x!=T){S[x]=S[x].concat(S[T]);S.remove(T);return}};var z=Q.length,N=f.width;for(var O=0,H=1;O<z;O+=4,H++){var I=Q[O],P=Q[O+1],R=Q[O+2],G=(H>N)?((H%N)-1):H,F=(H>N)?(Math.ceil(H/N)-1):1;if(l(I,P,R)){L.push({id:H,skin:true,region:0,x:G,y:F,checked:false});var w=-1,C=[H-2,(H-N)-2,H-N-1,(H-N)],v=false;for(var M=0;M<4;M++){var D=C[M];if(L[D]&&L[D].skin){if(L[D].region!=w&&w!=-1&&E!=w&&K!=L[D].region){B(w,L[D].region)}w=L[D].region;v=true}}if(!v){L[H-1].region=A.length;A.push([L[H-1]]);continue}else{if(w>-1){if(!A[w]){A[w]=[]}L[H-1].region=w;A[w].push(L[H-1])}}}else{L.push({id:H,skin:false,region:0,x:G,y:F,checked:false})}}h(A,S);o()},h=function(w,z){var x=z.length,B=[];while(x--){var y=z[x],A=y.length;if(!B[x]){B[x]=[]}while(A--){var v=y[A];B[x]=B[x].concat(w[v]);w[v]=[]}}var u=w.length;while(u--){if(w[u].length>0){B.push(w[u])}}r(B)},r=function(u){var w=u.length;for(var v=0;v<w;v++){if(u[v].length>30){j.push(u[v])}}},o=function(){var w=j.length,u=f.width*f.height,v=0;if(w<3){c(false);return}(function(){var y=false;while(!y){y=true;for(var z=0;z<w-1;z++){if(j[z].length<j[z+1].length){y=false;var x=j[z];j[z]=j[z+1];j[z+1]=x}}}})();while(w--){v+=j[w].length}if((v/u)*100<15){c(false);return}if((j[0].length/v)*100<35&&(j[1].length/v)*100<30&&(j[2].length/v)*100<30){c(false);return}if((j[0].length/v)*100<45){c(false);return}if(j.length>60){c(false);return}c(true)},c=function(u){if(m){m(u)}else{if(u){console.log("the picture contains nudity")}}},i=function(){var w=j.length;for(var z=0;z<w;z++){var B=j[z],y=B.length,x=Math.ceil(Math.random()*255),C=Math.ceil(Math.random()*255),D=Math.ceil(Math.random()*255);for(var v=0;v<y;v++){var u=p.getImageData(B[v].x,B[v].y,1,1),A=u.data;A[0]=x;A[1]=C;A[2]=D;u.data=A;p.putImageData(u,B[v].x,B[v].y)}}},l=function(u,A,E){var B=((u>95)&&(A>40&&A<100)&&(E>20)&&((Math.max(u,A,E)-Math.min(u,A,E))>15)&&(Math.abs(u-A)>15)&&(u>A)&&(u>E)),C=e(u,A,E),F=C[0],v=C[1],z=C[2],D=(((F/v)>1.185)&&(((u*E)/(Math.pow(u+A+E,2)))>0.107)&&(((u*A)/(Math.pow(u+A+E,2)))>0.112)),y=d(u,A,E),x=y[0],G=y[1],w=(x>0&&x<35&&G>0.23&&G<0.68);return(B||D||w)},s=function(z,x,v){z/=255,x/=255,v/=255;var A=0.299*z+0.587*x+0.114*v,w=z-A,u=v-A;return[A,w,u]},n=function(w,v,u){return[Math.acos((0.5*((w-v)+(w-u)))/(Math.sqrt((Math.pow((w-v),2)+((w-u)*(v-u)))))),1-(3*((Math.min(w,v,u))/(w+v+u))),(1/3)*(w+v+u)]},d=function(y,x,u){var w=0,A=Math.max(y,x,u),z=Math.min(y,x,u),v=A-z;if(A==y){w=(x-u)/v}else{if(A==x){w=2+((x-y)/v)}else{w=4+((y-x)/v)}}w=w*60;if(w<0){w=w+360}return[w,1-(3*((Math.min(y,x,u))/(y+x+u))),(1/3)*(y+x+u)]},e=function(x,w,u){var v=x+w+u;return[(x/v),(w/v),(u/v)]};return{init:function(){k()},load:function(u){if(typeof(u)=="string"){b(u)}else{g(u)}},scan:function(u){if(arguments.length>0&&typeof(arguments[0])=="function"){m=u}q()}}})();window.nude=a;a.init()})();